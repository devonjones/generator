#!/usr/bin/env python
import json
import sys

import click

from town_names.commands.generate import generate_command
from town_names.commands.proportions import proportion_command
from town_names.commands.tags import tag_command

@click.group()
@click.pass_context
def cli(ctx):
    ctx.ensure_object(dict)

@cli.command()
@click.pass_context
def tags(ctx):
    tag_list = tag_command()
    print('\n'.join(tag_list))

@cli.command()
@click.option('--tag', '-t', multiple=True)
@click.argument('towns')
@click.pass_context
def generate(ctx, tag, towns):
    s = generate_command(tag, towns)
    print(s)
    print(s.description())


@cli.command()
@click.argument('towns')
@click.pass_context
def proportions(ctx, towns):
    out = proportion_command(towns)
    print(json.dumps(out, indent=2))

if __name__ == '__main__':
    sys.exit(cli(obj={}))


